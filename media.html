<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <meta name="robots" content="noindex">
        <style>
            .sh:hover {
                box-shadow: 5px 10px black;
            }
        </style>
    <script>
        function mediaUpload() {
            var password = document.getElementById("password").value;
            var accountName = document.getElementById("accountName").value;
            var file = document.getElementById("files[]").files;

            var formData = new FormData();
            for(let i=0; i<file.length; i++) {
                formData.append('file', file[i]);
            }
            

            const response = fetch(`${window.location.href}/mediaUpload`, {
                method: "POST",
                headers: {
                    "AccountName": accountName,
                    "Password": password
                },
                body: formData
            })
        }

        function mediaDelete() {
            var password = document.getElementById("password").value;
            var accountName = document.getElementById("accountName").value;
            var filename = document.getElementById("filename").value;

            const response = fetch(`${window.location.href}/mediaDelete`, {
                method: "POST",
                headers: {
                    "AccountName": accountName,
                    "Password": password,
                    "Filename": filename
                },
            })
        }

        function getMedia() {
            var password = document.getElementById("password").value;
            var accountName = document.getElementById("accountName").value;

            const response = fetch(`${window.location.href}/getMedia`, {
                method: "GET",
                headers: {
                    "AccountName": accountName,
                    "Password": password
                }
            })
            .then((response) => response.text())
            .then((text) => {
                document.getElementById("fileDiv").innerHTML = text;
            })
        }

        function openMedia(media) {
            var password = document.getElementById("password").value;
            var accountName = document.getElementById("accountName").value;

            window.open(`${window.location.href}/openMedia?file=${media}&accountName=${accountName}&password=${password}`)
        }
    </script>
    </head>
    <body data-bs-theme="dark">
        <div class="text-center w-40 p-3 fs-4">
            <h1>MEDIA PORTAL</h1>
            <input placeholder="Account Name" type="text" id="accountName" name="accountName" class="sh rounded border-dark border-1 fs-1">
        </div>
        <div class="d-flex flex-column flex-grow-1 bg-white rounded w-75 align-self-center justify-content-center mx-auto p-5">
            <div class="row">
                <div class="text-end col-md-6">
                    <h2 class="text-black m-1">File Upload</h2>
                    <input type=file name=file id="files[]" multiple="multiple" class="text-center bg-black border-dark border-1 rounded w-50 p-1 fs-4 text-white m-1 align-self-start">
                    <button type="button" onclick="mediaUpload()" class="sh text-center bg-primary border-dark border-1 rounded w-50 p-1 fs-2 text-white m-1 align-self-start">Upload</button>
                </div>
                <div class="text-start col-md-6">
                    <h2 class="text-black m-1">File Delete</h2>
                    <input placeholder="Filename" type="text" id="filename" name="filename" class="w-50 align-self-end m-1 rounded border-dark border-1">
                    <button type="button" onclick="mediaDelete()" class="sh text-center bg-primary border-dark border-1 rounded w-50 p-1 fs-2 text-white m-1 align-self-start">Delete</button>
                </div>
            </div>
            <div class="text-center">
                <h2 class="text-black m-1">File List</h2>
                <button type="button" onclick="getMedia()" class="sh text-center bg-primary border-dark border-1 rounded w-50 p-1 fs-2 text-white m-1 align-self-start">Retrieve Files</button>
            </div>
            <br>
            <div class="text-center bg-white text-black fs-4 mw-50 h-90" id="fileDiv"></div>
        </div>
    </body>
</html>